<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lawrence Wu">
<meta name="dcterms.date" content="2025-12-19">

<title>Bunching Charitable Contributions in 2025 ‚Äì Lawrence Wu</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-0b37c64f34216b628666a8dac638b53b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LN4GM4FVCJ"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-LN4GM4FVCJ', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script>
  // Log script loading attempt
  console.log('Loading GitHub stars script');

  // Simple script loading for main website
  const scriptTag = document.createElement('script');
  scriptTag.src = '/js/github-stars.js';
  scriptTag.async = false;
  scriptTag.defer = true;
  scriptTag.onload = () => console.log('GitHub stars script loaded successfully');
  scriptTag.onerror = (err) => console.error('Error loading GitHub stars script:', err);

  // Append to document head
  document.head.appendChild(scriptTag);
</script>
<script src="https://www.blueletterbible.org/assets/scripts/blbToolTip/BLB_ScriptTagger-min.js" type="text/javascript"></script>
<script type="text/javascript">
  BLB.Tagger.Translation = 'ESV';
  BLB.Tagger.HyperLinks = 'all';
  BLB.Tagger.HideTanslationAbbrev = false;
  BLB.Tagger.TargetNewWindow = true;
  BLB.Tagger.DarkTheme = false;
  BLB.Tagger.Style = 'par';
  BLB.Tagger.NoSearchTagNames = '';
  BLB.Tagger.NoSearchClassNames = 'noTag doNotTag';
</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Bunching Charitable Contributions in 2025 ‚Äì Lawrence Wu">
<meta property="og:description" content="This is Lawrence Wu‚Äôs personal website">
<meta property="og:image" content="https://lawwu.github.io/blog.html/posts/2025-12-19-bunching-strategy/images/deductions_comparison.png">
<meta property="og:site_name" content="Lawrence Wu">
<meta property="og:image:height" content="1450">
<meta property="og:image:width" content="2960">
<meta name="twitter:title" content="Bunching Charitable Contributions in 2025 ‚Äì Lawrence Wu">
<meta name="twitter:description" content="This is Lawrence Wu‚Äôs personal website">
<meta name="twitter:image" content="https://lawwu.github.io/blog.html/posts/2025-12-19-bunching-strategy/images/deductions_comparison.png">
<meta name="twitter:creator" content="@law_wu">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image-height" content="1450">
<meta name="twitter:image-width" content="2960">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Lawrence Wu</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lawwu.github.io/til/"> 
<span class="menu-text">TIL</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/lawwu"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text">GitHub</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://twitter.com/law_wu"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text">Twitter</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:lawrencewu1+blog@gmail.com"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-bunching" id="toc-what-is-bunching" class="nav-link active" data-scroll-target="#what-is-bunching">What is Bunching?</a></li>
  <li><a href="#example-scenario" id="toc-example-scenario" class="nav-link" data-scroll-target="#example-scenario">Example Scenario</a></li>
  <li><a href="#the-result" id="toc-the-result" class="nav-link" data-scroll-target="#the-result">The Result</a></li>
  <li><a href="#should-you-do-this" id="toc-should-you-do-this" class="nav-link" data-scroll-target="#should-you-do-this">Should You Do This?</a></li>
  <li><a href="#try-it-yourself-interactive-calculator" id="toc-try-it-yourself-interactive-calculator" class="nav-link" data-scroll-target="#try-it-yourself-interactive-calculator">Try It Yourself: Interactive Calculator</a></li>
  <li><a href="#my-takeaway" id="toc-my-takeaway" class="nav-link" data-scroll-target="#my-takeaway">My Takeaway</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bunching Charitable Contributions in 2025</h1>
  <div class="quarto-categories">
    <div class="quarto-category">personal finance</div>
    <div class="quarto-category">taxes</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lawrence Wu </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 19, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>I recently took advantage of a strategy called ‚Äúbunching‚Äù where you combine multiple years of charitable contributions into one year. I‚Äôll use a made up example here but you could plug in your own numbers.</p>
<p><del>This strategy has worked in years past but it‚Äôs gotten better because of the 2025 One Big Beautiful Bill Act which increased the SALT cap to $40,000 (from $10,000). SALT = state and local taxes, which can include income taxes (or sales taxes instead), plus property taxes. It‚Äôs important here because you are allowed to deduct state and local income taxes from your federal return. This change is <a href="https://www.hrblock.com/tax-center/irs/tax-law-and-policy/one-big-beautiful-bill-salt-deduction/">effective for tax years 2025-2029</a>.</del></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Correction
</div>
</div>
<div class="callout-body-container callout-body">
<p>I was mistaken. The increase in SALT from $10,000 to $40,000 actually makes bunching make sense less in most years because if you live in a high tax state you can now deduct up to $40,000 in SALT. If your SALT is above $31,500 in a given year, it doesn‚Äôt make a lot of sense to bunch.</p>
</div>
</div>
<section id="what-is-bunching" class="level2">
<h2 class="anchored" data-anchor-id="what-is-bunching">What is Bunching?</h2>
<p>The idea is simple:</p>
<ul>
<li><strong>Year 1:</strong> Donate 2 years worth of charity in one year ‚Üí Itemize deductions
<ul>
<li>When I‚Äôve done this, I give next year‚Äôs amount (2026) in the last month of the prior year (Dec 2025).</li>
<li>You could also put two years of charitable contributions into a Donor Advised Fund, take the itemized deduction in that year and then spread the donations out over two years.</li>
</ul></li>
<li><strong>Year 2:</strong> Make no charitable donations ‚Üí Take standard deduction</li>
<li><strong>Result:</strong> More total deductions over 2 years than taking the standard deduction both years</li>
</ul>
<p>You can also prepay property tax payments. Property tax is deductible in the year you <em>pay</em> it, not when it‚Äôs due. In <a href="https://taxbill.octreasurer.gov/">Orange County, CA, property tax</a> comes in two installments (December and April). In your bunching year, you can pay three installments: April, December and the next April (early).</p>
<p>It‚Äôs kind of interesting if you search ‚Äúcalifornia prepay property taxes‚Äù, many of the articles (like <a href="https://www.sfchronicle.com/business/networth/article/Should-you-prepay-your-state-income-and-property-12448762.php">this one</a> and this <a href="https://www.bogleheads.org/forum/viewtopic.php?t=235950">Bogleheads post</a>) are from 2017 because the TCJA capped SALT deductions (including property tax) at $10,000 so it didn‚Äôt make a lot of sense to prepay property tax like this.</p>
</section>
<section id="example-scenario" class="level2">
<h2 class="anchored" data-anchor-id="example-scenario">Example Scenario</h2>
<p>Let‚Äôs use a realistic example to see how this works:</p>
<ul>
<li>Income: $150,000 (married filing jointly)</li>
<li>Location: California (or another high tax state)</li>
<li>Charitable giving: 10% of income = $15,000 per year, so $30,000 over 2 years</li>
<li>Property tax: $5,000/year</li>
<li>Mortgage interest: $10,000/year</li>
</ul>
</section>
<section id="the-result" class="level2">
<h2 class="anchored" data-anchor-id="the-result">The Result</h2>
<p><strong>Traditional approach:</strong> Itemize $36,035 each year (charity + property tax + state tax + mortgage interest), total of $72,070 of total deductions.</p>
<p><strong>Bunching strategy:</strong></p>
<ul>
<li>Year 1: Itemize $53,535 (bunch 2 years of charity + accelerate property tax)</li>
<li>Year 2: Take $31,500 standard deduction (no charity, less property tax)</li>
<li>Total deductions of $85,035 (increased deductions of $12,965) which results in a tax savings of <strong>~$2,803 over 2 years</strong></li>
</ul>
<p>Here‚Äôs the visual breakdown:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/deductions_comparison.png" class="img-fluid figure-img"></p>
<figcaption>Total deductions over 2 years</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/deductions_breakdown.png" class="img-fluid figure-img"></p>
<figcaption>Year-by-year breakdown</figcaption>
</figure>
</div>
</section>
<section id="should-you-do-this" class="level2">
<h2 class="anchored" data-anchor-id="should-you-do-this">Should You Do This?</h2>
<p>Bunching works when your Year 1 itemized deductions exceed $31,500.</p>
<p><strong>You‚Äôre a good candidate if you have:</strong></p>
<ul>
<li>Mortgage interest ($3,000+)</li>
<li>Regular charitable giving (8-10%+ of income)</li>
<li>High state taxes (CA, NY, NJ, etc.)</li>
<li>Property tax to prepay</li>
</ul>
</section>
<section id="try-it-yourself-interactive-calculator" class="level2">
<h2 class="anchored" data-anchor-id="try-it-yourself-interactive-calculator">Try It Yourself: Interactive Calculator</h2>
<p>Want to see if bunching works for your situation? Adjust the sliders below to run your own numbers:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="77" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 76;"><span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>viewof income <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">50000</span><span class="op">,</span> <span class="dv">500000</span>]<span class="op">,</span> {</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">150000</span><span class="op">,</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">5000</span><span class="op">,</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Annual Income (MFJ):"</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>viewof charityPct <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">20</span>]<span class="op">,</span> {</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Charitable Giving (% of income):"</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>viewof propertyTax <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">50000</span>]<span class="op">,</span> {</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">5000</span><span class="op">,</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Annual Property Tax:"</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>viewof mortgageInterest <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">30000</span>]<span class="op">,</span> {</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">10000</span><span class="op">,</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Annual Mortgage Interest:"</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>viewof state <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="st">"California"</span><span class="op">,</span> <span class="st">"New York"</span><span class="op">,</span> <span class="st">"New Jersey"</span><span class="op">,</span> <span class="st">"Texas"</span><span class="op">,</span> <span class="st">"Florida"</span>]<span class="op">,</span> {</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="st">"California"</span><span class="op">,</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"State:"</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb2" data-startfrom="111" data-source-offset="-54"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 110;"><span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">calculateStateTax</span>(income<span class="op">,</span> state) {</span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> caStdDeduction <span class="op">=</span> <span class="dv">11080</span><span class="op">;</span></span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> taxableIncome <span class="op">=</span> income <span class="op">-</span> caStdDeduction<span class="op">;</span></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (state <span class="op">===</span> <span class="st">"California"</span>) {</span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>    <span class="co">// CA MFJ brackets (simplified)</span></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (taxableIncome <span class="op">&lt;=</span> <span class="dv">21512</span>) <span class="cf">return</span> taxableIncome <span class="op">*</span> <span class="fl">0.01</span><span class="op">;</span></span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (taxableIncome <span class="op">&lt;=</span> <span class="dv">50998</span>) <span class="cf">return</span> <span class="dv">215</span> <span class="op">+</span> (taxableIncome <span class="op">-</span> <span class="dv">21512</span>) <span class="op">*</span> <span class="fl">0.02</span><span class="op">;</span></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (taxableIncome <span class="op">&lt;=</span> <span class="dv">80490</span>) <span class="cf">return</span> <span class="dv">805</span> <span class="op">+</span> (taxableIncome <span class="op">-</span> <span class="dv">50998</span>) <span class="op">*</span> <span class="fl">0.04</span><span class="op">;</span></span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (taxableIncome <span class="op">&lt;=</span> <span class="dv">111732</span>) <span class="cf">return</span> <span class="dv">1985</span> <span class="op">+</span> (taxableIncome <span class="op">-</span> <span class="dv">80490</span>) <span class="op">*</span> <span class="fl">0.06</span><span class="op">;</span></span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (taxableIncome <span class="op">&lt;=</span> <span class="dv">141212</span>) <span class="cf">return</span> <span class="dv">3860</span> <span class="op">+</span> (taxableIncome <span class="op">-</span> <span class="dv">111732</span>) <span class="op">*</span> <span class="fl">0.08</span><span class="op">;</span></span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">6220</span> <span class="op">+</span> (taxableIncome <span class="op">-</span> <span class="dv">141212</span>) <span class="op">*</span> <span class="fl">0.093</span><span class="op">;</span></span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (state <span class="op">===</span> <span class="st">"New York"</span>) <span class="cf">return</span> income <span class="op">*</span> <span class="fl">0.065</span><span class="op">;</span> <span class="co">// Simplified</span></span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (state <span class="op">===</span> <span class="st">"New Jersey"</span>) <span class="cf">return</span> income <span class="op">*</span> <span class="fl">0.055</span><span class="op">;</span> <span class="co">// Simplified</span></span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (state <span class="op">===</span> <span class="st">"Texas"</span> <span class="op">||</span> state <span class="op">===</span> <span class="st">"Florida"</span>) <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// No state income tax</span></span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a><span class="co">// Calculate federal tax</span></span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">calculateFederalTax</span>(taxableIncome) {</span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (taxableIncome <span class="op">&lt;=</span> <span class="dv">23850</span>) <span class="cf">return</span> taxableIncome <span class="op">*</span> <span class="fl">0.10</span><span class="op">;</span></span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (taxableIncome <span class="op">&lt;=</span> <span class="dv">96950</span>) <span class="cf">return</span> <span class="dv">2385</span> <span class="op">+</span> (taxableIncome <span class="op">-</span> <span class="dv">23850</span>) <span class="op">*</span> <span class="fl">0.12</span><span class="op">;</span></span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (taxableIncome <span class="op">&lt;=</span> <span class="dv">206700</span>) <span class="cf">return</span> <span class="dv">11157</span> <span class="op">+</span> (taxableIncome <span class="op">-</span> <span class="dv">96950</span>) <span class="op">*</span> <span class="fl">0.22</span><span class="op">;</span></span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (taxableIncome <span class="op">&lt;=</span> <span class="dv">394600</span>) <span class="cf">return</span> <span class="dv">35301</span> <span class="op">+</span> (taxableIncome <span class="op">-</span> <span class="dv">206700</span>) <span class="op">*</span> <span class="fl">0.24</span><span class="op">;</span></span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">80405</span> <span class="op">+</span> (taxableIncome <span class="op">-</span> <span class="dv">394600</span>) <span class="op">*</span> <span class="fl">0.32</span><span class="op">;</span></span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a><span class="co">// Calculations</span></span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>charityPerYear <span class="op">=</span> (income <span class="op">*</span> charityPct <span class="op">/</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a>stateTax <span class="op">=</span> <span class="fu">calculateStateTax</span>(income<span class="op">,</span> state)<span class="op">;</span></span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>standardDeduction <span class="op">=</span> <span class="dv">31500</span><span class="op">;</span></span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a><span class="co">// Traditional approach (itemize each year)</span></span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>traditionalItemized <span class="op">=</span> charityPerYear <span class="op">+</span> propertyTax <span class="op">+</span> stateTax <span class="op">+</span> mortgageInterest<span class="op">;</span></span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a>traditionalDeduction <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(traditionalItemized<span class="op">,</span> standardDeduction)<span class="op">;</span></span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a>traditionalFederalTax <span class="op">=</span> <span class="fu">calculateFederalTax</span>(income <span class="op">-</span> traditionalDeduction)<span class="op">;</span></span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>traditionalTotal2Year <span class="op">=</span> traditionalFederalTax <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a><span class="co">// Bunching approach</span></span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>bunchedYear1Itemized <span class="op">=</span> (charityPerYear <span class="op">*</span> <span class="dv">2</span>) <span class="op">+</span> (propertyTax <span class="op">*</span> <span class="fl">1.5</span>) <span class="op">+</span> stateTax <span class="op">+</span> mortgageInterest<span class="op">;</span></span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>bunchedYear1FederalTax <span class="op">=</span> <span class="fu">calculateFederalTax</span>(income <span class="op">-</span> bunchedYear1Itemized)<span class="op">;</span></span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a>bunchedYear2Itemized <span class="op">=</span> <span class="dv">0</span> <span class="op">+</span> (propertyTax <span class="op">*</span> <span class="fl">0.5</span>) <span class="op">+</span> stateTax <span class="op">+</span> mortgageInterest<span class="op">;</span></span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>bunchedYear2Deduction <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(bunchedYear2Itemized<span class="op">,</span> standardDeduction)<span class="op">;</span></span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a>bunchedYear2FederalTax <span class="op">=</span> <span class="fu">calculateFederalTax</span>(income <span class="op">-</span> bunchedYear2Deduction)<span class="op">;</span></span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a>bunchedTotal2Year <span class="op">=</span> bunchedYear1FederalTax <span class="op">+</span> bunchedYear2FederalTax<span class="op">;</span></span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-160"><a href="#cb2-160" aria-hidden="true" tabindex="-1"></a><span class="co">// Savings</span></span>
<span id="cb2-161"><a href="#cb2-161" aria-hidden="true" tabindex="-1"></a>savings <span class="op">=</span> traditionalTotal2Year <span class="op">-</span> bunchedTotal2Year<span class="op">;</span></span>
<span id="cb2-162"><a href="#cb2-162" aria-hidden="true" tabindex="-1"></a>savingsPercent <span class="op">=</span> (savings <span class="op">/</span> traditionalTotal2Year) <span class="op">*</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb2-163"><a href="#cb2-163" aria-hidden="true" tabindex="-1"></a>worthIt <span class="op">=</span> savings <span class="op">&gt;</span> <span class="dv">100</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-18" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb3" data-startfrom="167" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 166;"><span id="cb3-167"><a href="#cb3-167" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb3-168"><a href="#cb3-168" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid #3498db;"&gt;</span></span>
<span id="cb3-169"><a href="#cb3-169" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;h3 style="margin-top: 0; color: #2c3e50;"&gt;üìä Results&lt;/h3&gt;</span></span>
<span id="cb3-170"><a href="#cb3-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-171"><a href="#cb3-171" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;"&gt;</span></span>
<span id="cb3-172"><a href="#cb3-172" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);"&gt;</span></span>
<span id="cb3-173"><a href="#cb3-173" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;h4 style="margin-top: 0; color: #555;"&gt;Traditional Approach&lt;/h4&gt;</span></span>
<span id="cb3-174"><a href="#cb3-174" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;p style="margin: 5px 0; font-size: 14px;"&gt;&lt;strong&gt;Year 1 Deductions:&lt;/strong&gt; $</span><span class="sc">${</span>traditionalDeduction<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'en-US'</span><span class="op">,</span> {<span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span>})<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-175"><a href="#cb3-175" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;p style="margin: 5px 0; font-size: 14px;"&gt;&lt;strong&gt;Year 2 Deductions:&lt;/strong&gt; $</span><span class="sc">${</span>traditionalDeduction<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'en-US'</span><span class="op">,</span> {<span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span>})<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-176"><a href="#cb3-176" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;p style="margin: 5px 0; font-size: 14px;"&gt;&lt;strong&gt;2-Year Total Deductions:&lt;/strong&gt; $</span><span class="sc">${</span>(traditionalDeduction <span class="op">*</span> <span class="dv">2</span>)<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'en-US'</span><span class="op">,</span> {<span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span>})<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-177"><a href="#cb3-177" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;hr style="border: none; border-top: 1px solid #eee; margin: 10px 0;"&gt;</span></span>
<span id="cb3-178"><a href="#cb3-178" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;p style="margin: 5px 0; font-size: 16px;"&gt;&lt;strong&gt;Total Federal Tax:&lt;/strong&gt; $</span><span class="sc">${</span>traditionalTotal2Year<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'en-US'</span><span class="op">,</span> {<span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span>})<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-179"><a href="#cb3-179" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb3-180"><a href="#cb3-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-181"><a href="#cb3-181" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border: 2px solid </span><span class="sc">${</span>worthIt <span class="op">?</span> <span class="st">'#28a745'</span> <span class="op">:</span> <span class="st">'#6c757d'</span><span class="sc">}</span><span class="vs">;"&gt;</span></span>
<span id="cb3-182"><a href="#cb3-182" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;h4 style="margin-top: 0; color: #555;"&gt;Bunching Strategy&lt;/h4&gt;</span></span>
<span id="cb3-183"><a href="#cb3-183" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;p style="margin: 5px 0; font-size: 14px;"&gt;&lt;strong&gt;Year 1 Deductions:&lt;/strong&gt; $</span><span class="sc">${</span>bunchedYear1Itemized<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'en-US'</span><span class="op">,</span> {<span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span>})<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-184"><a href="#cb3-184" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;p style="margin: 5px 0; font-size: 14px;"&gt;&lt;strong&gt;Year 2 Deductions:&lt;/strong&gt; $</span><span class="sc">${</span>bunchedYear2Deduction<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'en-US'</span><span class="op">,</span> {<span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span>})<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-185"><a href="#cb3-185" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;p style="margin: 5px 0; font-size: 14px;"&gt;&lt;strong&gt;2-Year Total Deductions:&lt;/strong&gt; $</span><span class="sc">${</span>(bunchedYear1Itemized <span class="op">+</span> bunchedYear2Deduction)<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'en-US'</span><span class="op">,</span> {<span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span>})<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-186"><a href="#cb3-186" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;hr style="border: none; border-top: 1px solid #eee; margin: 10px 0;"&gt;</span></span>
<span id="cb3-187"><a href="#cb3-187" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;p style="margin: 5px 0; font-size: 16px;"&gt;&lt;strong&gt;Total Federal Tax:&lt;/strong&gt; $</span><span class="sc">${</span>bunchedTotal2Year<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'en-US'</span><span class="op">,</span> {<span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span>})<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-188"><a href="#cb3-188" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb3-189"><a href="#cb3-189" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb3-190"><a href="#cb3-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-191"><a href="#cb3-191" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div style="background: </span><span class="sc">${</span>worthIt <span class="op">?</span> <span class="st">'#d4edda'</span> <span class="op">:</span> <span class="st">'#fff3cd'</span><span class="sc">}</span><span class="vs">; padding: 20px; border-radius: 8px; text-align: center; border: 3px solid </span><span class="sc">${</span>worthIt <span class="op">?</span> <span class="st">'#28a745'</span> <span class="op">:</span> <span class="st">'#ffc107'</span><span class="sc">}</span><span class="vs">;"&gt;</span></span>
<span id="cb3-192"><a href="#cb3-192" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;h3 style="margin: 0; color: </span><span class="sc">${</span>worthIt <span class="op">?</span> <span class="st">'#155724'</span> <span class="op">:</span> <span class="st">'#856404'</span><span class="sc">}</span><span class="vs">; font-size: 24px;"&gt;</span></span>
<span id="cb3-193"><a href="#cb3-193" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>worthIt <span class="op">?</span> <span class="st">'‚úì'</span> <span class="op">:</span> <span class="st">'‚ö†Ô∏è'</span><span class="sc">}</span><span class="vs"> Tax Savings: </span><span class="sc">${</span>savings <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="st">'$'</span> <span class="op">:</span> <span class="st">'-$'</span><span class="sc">}${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(savings)<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'en-US'</span><span class="op">,</span> {<span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span>})<span class="sc">}</span></span>
<span id="cb3-194"><a href="#cb3-194" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/h3&gt;</span></span>
<span id="cb3-195"><a href="#cb3-195" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;p style="margin: 10px 0 0 0; font-size: 16px; color: </span><span class="sc">${</span>worthIt <span class="op">?</span> <span class="st">'#155724'</span> <span class="op">:</span> <span class="st">'#856404'</span><span class="sc">}</span><span class="vs">;"&gt;</span></span>
<span id="cb3-196"><a href="#cb3-196" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>worthIt</span>
<span id="cb3-197"><a href="#cb3-197" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="vs">`You save </span><span class="sc">${</span>savingsPercent<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">% over 2 years with bunching! üéâ`</span></span>
<span id="cb3-198"><a href="#cb3-198" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> savings <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb3-199"><a href="#cb3-199" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="st">'Small benefit - bunching might not be worth the hassle'</span></span>
<span id="cb3-200"><a href="#cb3-200" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="st">'Bunching doesn</span><span class="sc">\'</span><span class="st">t help - stick with traditional approach'</span><span class="sc">}</span></span>
<span id="cb3-201"><a href="#cb3-201" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/p&gt;</span></span>
<span id="cb3-202"><a href="#cb3-202" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb3-203"><a href="#cb3-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-204"><a href="#cb3-204" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;p style="margin-top: 15px; font-size: 12px; color: #666; font-style: italic;"&gt;</span></span>
<span id="cb3-205"><a href="#cb3-205" aria-hidden="true" tabindex="-1"></a><span class="vs">    üí° Note: This calculator uses simplified tax calculations and assumes you're in the 2025 tax year with the new $40k SALT cap. It doesn't account for AMT, phase-outs, or all state-specific rules. Consult a tax professional for accurate advice specific to your situation.</span></span>
<span id="cb3-206"><a href="#cb3-206" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/p&gt;</span></span>
<span id="cb3-207"><a href="#cb3-207" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb3-208"><a href="#cb3-208" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="my-takeaway" class="level2">
<h2 class="anchored" data-anchor-id="my-takeaway">My Takeaway</h2>
<p>After running the numbers on scenarios like this, it‚Äôs clear that bunching can be worthwhile for many households, especially with the higher SALT cap in 2025.</p>
<p>Don‚Äôt assume bunching works without running your own numbers. The 2025 tax changes help here. Under the old $10k SALT cap, this example would save $2,530. Under the new $40k cap, it saves $2,803.</p>
<p>If you‚Äôre in a high-tax state with a mortgage and regular charitable giving, spend some time to run the numbers for your specific situation.</p>
<hr>
<p><em>AI Disclaimer</em>: Claude Code &amp; Claude Sonnet 4.5 helped me write this article and generate the ocde for these visualizations. I reviewed the output and made a bunch of edits which included deleting 75% of what was generated.</p>
<p><em>Disclaimer: This blog post is for educational purposes only and does not constitute tax, legal, or financial advice. Tax laws are complex and change frequently. Consult with a qualified tax professional about your specific situation before making any tax-related decisions.</em></p>


</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ilxudmlld29mIGluY29tZSA9IElucHV0cy5yYW5nZShbNTAwMDAsIDUwMDAwMF0sIHtcbiAgdmFsdWU6IDE1MDAwMCxcbiAgc3RlcDogNTAwMCxcbiAgbGFiZWw6IFwiQW5udWFsIEluY29tZSAoTUZKKTpcIlxufSlcblxudmlld29mIGNoYXJpdHlQY3QgPSBJbnB1dHMucmFuZ2UoWzAsIDIwXSwge1xuICB2YWx1ZTogMTAsXG4gIHN0ZXA6IDEsXG4gIGxhYmVsOiBcIkNoYXJpdGFibGUgR2l2aW5nICglIG9mIGluY29tZSk6XCJcbn0pXG5cbnZpZXdvZiBwcm9wZXJ0eVRheCA9IElucHV0cy5yYW5nZShbMCwgNTAwMDBdLCB7XG4gIHZhbHVlOiA1MDAwLFxuICBzdGVwOiA1MDAsXG4gIGxhYmVsOiBcIkFubnVhbCBQcm9wZXJ0eSBUYXg6XCJcbn0pXG5cbnZpZXdvZiBtb3J0Z2FnZUludGVyZXN0ID0gSW5wdXRzLnJhbmdlKFswLCAzMDAwMF0sIHtcbiAgdmFsdWU6IDEwMDAwLFxuICBzdGVwOiAxMDAwLFxuICBsYWJlbDogXCJBbm51YWwgTW9ydGdhZ2UgSW50ZXJlc3Q6XCJcbn0pXG5cbnZpZXdvZiBzdGF0ZSA9IElucHV0cy5zZWxlY3QoW1wiQ2FsaWZvcm5pYVwiLCBcIk5ldyBZb3JrXCIsIFwiTmV3IEplcnNleVwiLCBcIlRleGFzXCIsIFwiRmxvcmlkYVwiXSwge1xuICB2YWx1ZTogXCJDYWxpZm9ybmlhXCIsXG4gIGxhYmVsOiBcIlN0YXRlOlwiXG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiXG4vLyBDYWxjdWxhdGUgc3RhdGUgaW5jb21lIHRheCAoc2ltcGxpZmllZCBlc3RpbWF0ZXMpXG5mdW5jdGlvbiBjYWxjdWxhdGVTdGF0ZVRheChpbmNvbWUsIHN0YXRlKSB7XG4gIGNvbnN0IGNhU3RkRGVkdWN0aW9uID0gMTEwODA7XG4gIGNvbnN0IHRheGFibGVJbmNvbWUgPSBpbmNvbWUgLSBjYVN0ZERlZHVjdGlvbjtcblxuICBpZiAoc3RhdGUgPT09IFwiQ2FsaWZvcm5pYVwiKSB7XG4gICAgLy8gQ0EgTUZKIGJyYWNrZXRzIChzaW1wbGlmaWVkKVxuICAgIGlmICh0YXhhYmxlSW5jb21lIDw9IDIxNTEyKSByZXR1cm4gdGF4YWJsZUluY29tZSAqIDAuMDE7XG4gICAgaWYgKHRheGFibGVJbmNvbWUgPD0gNTA5OTgpIHJldHVybiAyMTUgKyAodGF4YWJsZUluY29tZSAtIDIxNTEyKSAqIDAuMDI7XG4gICAgaWYgKHRheGFibGVJbmNvbWUgPD0gODA0OTApIHJldHVybiA4MDUgKyAodGF4YWJsZUluY29tZSAtIDUwOTk4KSAqIDAuMDQ7XG4gICAgaWYgKHRheGFibGVJbmNvbWUgPD0gMTExNzMyKSByZXR1cm4gMTk4NSArICh0YXhhYmxlSW5jb21lIC0gODA0OTApICogMC4wNjtcbiAgICBpZiAodGF4YWJsZUluY29tZSA8PSAxNDEyMTIpIHJldHVybiAzODYwICsgKHRheGFibGVJbmNvbWUgLSAxMTE3MzIpICogMC4wODtcbiAgICByZXR1cm4gNjIyMCArICh0YXhhYmxlSW5jb21lIC0gMTQxMjEyKSAqIDAuMDkzO1xuICB9XG4gIGlmIChzdGF0ZSA9PT0gXCJOZXcgWW9ya1wiKSByZXR1cm4gaW5jb21lICogMC4wNjU7IC8vIFNpbXBsaWZpZWRcbiAgaWYgKHN0YXRlID09PSBcIk5ldyBKZXJzZXlcIikgcmV0dXJuIGluY29tZSAqIDAuMDU1OyAvLyBTaW1wbGlmaWVkXG4gIGlmIChzdGF0ZSA9PT0gXCJUZXhhc1wiIHx8IHN0YXRlID09PSBcIkZsb3JpZGFcIikgcmV0dXJuIDA7IC8vIE5vIHN0YXRlIGluY29tZSB0YXhcbiAgcmV0dXJuIDA7XG59XG5cbi8vIENhbGN1bGF0ZSBmZWRlcmFsIHRheFxuZnVuY3Rpb24gY2FsY3VsYXRlRmVkZXJhbFRheCh0YXhhYmxlSW5jb21lKSB7XG4gIGlmICh0YXhhYmxlSW5jb21lIDw9IDIzODUwKSByZXR1cm4gdGF4YWJsZUluY29tZSAqIDAuMTA7XG4gIGlmICh0YXhhYmxlSW5jb21lIDw9IDk2OTUwKSByZXR1cm4gMjM4NSArICh0YXhhYmxlSW5jb21lIC0gMjM4NTApICogMC4xMjtcbiAgaWYgKHRheGFibGVJbmNvbWUgPD0gMjA2NzAwKSByZXR1cm4gMTExNTcgKyAodGF4YWJsZUluY29tZSAtIDk2OTUwKSAqIDAuMjI7XG4gIGlmICh0YXhhYmxlSW5jb21lIDw9IDM5NDYwMCkgcmV0dXJuIDM1MzAxICsgKHRheGFibGVJbmNvbWUgLSAyMDY3MDApICogMC4yNDtcbiAgcmV0dXJuIDgwNDA1ICsgKHRheGFibGVJbmNvbWUgLSAzOTQ2MDApICogMC4zMjtcbn1cblxuLy8gQ2FsY3VsYXRpb25zXG5jaGFyaXR5UGVyWWVhciA9IChpbmNvbWUgKiBjaGFyaXR5UGN0IC8gMTAwKTtcbnN0YXRlVGF4ID0gY2FsY3VsYXRlU3RhdGVUYXgoaW5jb21lLCBzdGF0ZSk7XG5zdGFuZGFyZERlZHVjdGlvbiA9IDMxNTAwO1xuXG4vLyBUcmFkaXRpb25hbCBhcHByb2FjaCAoaXRlbWl6ZSBlYWNoIHllYXIpXG50cmFkaXRpb25hbEl0ZW1pemVkID0gY2hhcml0eVBlclllYXIgKyBwcm9wZXJ0eVRheCArIHN0YXRlVGF4ICsgbW9ydGdhZ2VJbnRlcmVzdDtcbnRyYWRpdGlvbmFsRGVkdWN0aW9uID0gTWF0aC5tYXgodHJhZGl0aW9uYWxJdGVtaXplZCwgc3RhbmRhcmREZWR1Y3Rpb24pO1xudHJhZGl0aW9uYWxGZWRlcmFsVGF4ID0gY2FsY3VsYXRlRmVkZXJhbFRheChpbmNvbWUgLSB0cmFkaXRpb25hbERlZHVjdGlvbik7XG50cmFkaXRpb25hbFRvdGFsMlllYXIgPSB0cmFkaXRpb25hbEZlZGVyYWxUYXggKiAyO1xuXG4vLyBCdW5jaGluZyBhcHByb2FjaFxuYnVuY2hlZFllYXIxSXRlbWl6ZWQgPSAoY2hhcml0eVBlclllYXIgKiAyKSArIChwcm9wZXJ0eVRheCAqIDEuNSkgKyBzdGF0ZVRheCArIG1vcnRnYWdlSW50ZXJlc3Q7XG5idW5jaGVkWWVhcjFGZWRlcmFsVGF4ID0gY2FsY3VsYXRlRmVkZXJhbFRheChpbmNvbWUgLSBidW5jaGVkWWVhcjFJdGVtaXplZCk7XG5cbmJ1bmNoZWRZZWFyMkl0ZW1pemVkID0gMCArIChwcm9wZXJ0eVRheCAqIDAuNSkgKyBzdGF0ZVRheCArIG1vcnRnYWdlSW50ZXJlc3Q7XG5idW5jaGVkWWVhcjJEZWR1Y3Rpb24gPSBNYXRoLm1heChidW5jaGVkWWVhcjJJdGVtaXplZCwgc3RhbmRhcmREZWR1Y3Rpb24pO1xuYnVuY2hlZFllYXIyRmVkZXJhbFRheCA9IGNhbGN1bGF0ZUZlZGVyYWxUYXgoaW5jb21lIC0gYnVuY2hlZFllYXIyRGVkdWN0aW9uKTtcblxuYnVuY2hlZFRvdGFsMlllYXIgPSBidW5jaGVkWWVhcjFGZWRlcmFsVGF4ICsgYnVuY2hlZFllYXIyRmVkZXJhbFRheDtcblxuLy8gU2F2aW5nc1xuc2F2aW5ncyA9IHRyYWRpdGlvbmFsVG90YWwyWWVhciAtIGJ1bmNoZWRUb3RhbDJZZWFyO1xuc2F2aW5nc1BlcmNlbnQgPSAoc2F2aW5ncyAvIHRyYWRpdGlvbmFsVG90YWwyWWVhcikgKiAxMDA7XG53b3J0aEl0ID0gc2F2aW5ncyA+IDEwMDtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxuaHRtbGBcbjxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmOGZmOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBtYXJnaW46IDIwcHggMDsgYm9yZGVyOiAycHggc29saWQgIzM0OThkYjtcIj5cbiAgPGgzIHN0eWxlPVwibWFyZ2luLXRvcDogMDsgY29sb3I6ICMyYzNlNTA7XCI+8J+TiiBSZXN1bHRzPC9oMz5cblxuICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyBnYXA6IDIwcHg7IG1hcmdpbjogMjBweCAwO1wiPlxuICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpO1wiPlxuICAgICAgPGg0IHN0eWxlPVwibWFyZ2luLXRvcDogMDsgY29sb3I6ICM1NTU7XCI+VHJhZGl0aW9uYWwgQXBwcm9hY2g8L2g0PlxuICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDVweCAwOyBmb250LXNpemU6IDE0cHg7XCI+PHN0cm9uZz5ZZWFyIDEgRGVkdWN0aW9uczo8L3N0cm9uZz4gJCR7dHJhZGl0aW9uYWxEZWR1Y3Rpb24udG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywge21heGltdW1GcmFjdGlvbkRpZ2l0czogMH0pfTwvcD5cbiAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiA1cHggMDsgZm9udC1zaXplOiAxNHB4O1wiPjxzdHJvbmc+WWVhciAyIERlZHVjdGlvbnM6PC9zdHJvbmc+ICQke3RyYWRpdGlvbmFsRGVkdWN0aW9uLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHttYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDB9KX08L3A+XG4gICAgICA8cCBzdHlsZT1cIm1hcmdpbjogNXB4IDA7IGZvbnQtc2l6ZTogMTRweDtcIj48c3Ryb25nPjItWWVhciBUb3RhbCBEZWR1Y3Rpb25zOjwvc3Ryb25nPiAkJHsodHJhZGl0aW9uYWxEZWR1Y3Rpb24gKiAyKS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7bWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwfSl9PC9wPlxuICAgICAgPGhyIHN0eWxlPVwiYm9yZGVyOiBub25lOyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICA8cCBzdHlsZT1cIm1hcmdpbjogNXB4IDA7IGZvbnQtc2l6ZTogMTZweDtcIj48c3Ryb25nPlRvdGFsIEZlZGVyYWwgVGF4Ojwvc3Ryb25nPiAkJHt0cmFkaXRpb25hbFRvdGFsMlllYXIudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywge21heGltdW1GcmFjdGlvbkRpZ2l0czogMH0pfTwvcD5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOyBib3JkZXI6IDJweCBzb2xpZCAke3dvcnRoSXQgPyAnIzI4YTc0NScgOiAnIzZjNzU3ZCd9O1wiPlxuICAgICAgPGg0IHN0eWxlPVwibWFyZ2luLXRvcDogMDsgY29sb3I6ICM1NTU7XCI+QnVuY2hpbmcgU3RyYXRlZ3k8L2g0PlxuICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDVweCAwOyBmb250LXNpemU6IDE0cHg7XCI+PHN0cm9uZz5ZZWFyIDEgRGVkdWN0aW9uczo8L3N0cm9uZz4gJCR7YnVuY2hlZFllYXIxSXRlbWl6ZWQudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywge21heGltdW1GcmFjdGlvbkRpZ2l0czogMH0pfTwvcD5cbiAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiA1cHggMDsgZm9udC1zaXplOiAxNHB4O1wiPjxzdHJvbmc+WWVhciAyIERlZHVjdGlvbnM6PC9zdHJvbmc+ICQke2J1bmNoZWRZZWFyMkRlZHVjdGlvbi50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7bWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwfSl9PC9wPlxuICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDVweCAwOyBmb250LXNpemU6IDE0cHg7XCI+PHN0cm9uZz4yLVllYXIgVG90YWwgRGVkdWN0aW9uczo8L3N0cm9uZz4gJCR7KGJ1bmNoZWRZZWFyMUl0ZW1pemVkICsgYnVuY2hlZFllYXIyRGVkdWN0aW9uKS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7bWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwfSl9PC9wPlxuICAgICAgPGhyIHN0eWxlPVwiYm9yZGVyOiBub25lOyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsgbWFyZ2luOiAxMHB4IDA7XCI+XG4gICAgICA8cCBzdHlsZT1cIm1hcmdpbjogNXB4IDA7IGZvbnQtc2l6ZTogMTZweDtcIj48c3Ryb25nPlRvdGFsIEZlZGVyYWwgVGF4Ojwvc3Ryb25nPiAkJHtidW5jaGVkVG90YWwyWWVhci50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7bWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwfSl9PC9wPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogJHt3b3J0aEl0ID8gJyNkNGVkZGEnIDogJyNmZmYzY2QnfTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlcjogM3B4IHNvbGlkICR7d29ydGhJdCA/ICcjMjhhNzQ1JyA6ICcjZmZjMTA3J307XCI+XG4gICAgPGgzIHN0eWxlPVwibWFyZ2luOiAwOyBjb2xvcjogJHt3b3J0aEl0ID8gJyMxNTU3MjQnIDogJyM4NTY0MDQnfTsgZm9udC1zaXplOiAyNHB4O1wiPlxuICAgICAgJHt3b3J0aEl0ID8gJ+KckycgOiAn4pqg77iPJ30gVGF4IFNhdmluZ3M6ICR7c2F2aW5ncyA+IDAgPyAnJCcgOiAnLSQnfSR7TWF0aC5hYnMoc2F2aW5ncykudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywge21heGltdW1GcmFjdGlvbkRpZ2l0czogMH0pfVxuICAgIDwvaDM+XG4gICAgPHAgc3R5bGU9XCJtYXJnaW46IDEwcHggMCAwIDA7IGZvbnQtc2l6ZTogMTZweDsgY29sb3I6ICR7d29ydGhJdCA/ICcjMTU1NzI0JyA6ICcjODU2NDA0J307XCI+XG4gICAgICAke3dvcnRoSXRcbiAgICAgICAgPyBgWW91IHNhdmUgJHtzYXZpbmdzUGVyY2VudC50b0ZpeGVkKDEpfSUgb3ZlciAyIHllYXJzIHdpdGggYnVuY2hpbmchIPCfjolgXG4gICAgICAgIDogc2F2aW5ncyA+IDBcbiAgICAgICAgICA/ICdTbWFsbCBiZW5lZml0IC0gYnVuY2hpbmcgbWlnaHQgbm90IGJlIHdvcnRoIHRoZSBoYXNzbGUnXG4gICAgICAgICAgOiAnQnVuY2hpbmcgZG9lc25cXCd0IGhlbHAgLSBzdGljayB3aXRoIHRyYWRpdGlvbmFsIGFwcHJvYWNoJ31cbiAgICA8L3A+XG4gIDwvZGl2PlxuXG4gIDxwIHN0eWxlPVwibWFyZ2luLXRvcDogMTVweDsgZm9udC1zaXplOiAxMnB4OyBjb2xvcjogIzY2NjsgZm9udC1zdHlsZTogaXRhbGljO1wiPlxuICAgIPCfkqEgTm90ZTogVGhpcyBjYWxjdWxhdG9yIHVzZXMgc2ltcGxpZmllZCB0YXggY2FsY3VsYXRpb25zIGFuZCBhc3N1bWVzIHlvdSdyZSBpbiB0aGUgMjAyNSB0YXggeWVhciB3aXRoIHRoZSBuZXcgJDQwayBTQUxUIGNhcC4gSXQgZG9lc24ndCBhY2NvdW50IGZvciBBTVQsIHBoYXNlLW91dHMsIG9yIGFsbCBzdGF0ZS1zcGVjaWZpYyBydWxlcy4gQ29uc3VsdCBhIHRheCBwcm9mZXNzaW9uYWwgZm9yIGFjY3VyYXRlIGFkdmljZSBzcGVjaWZpYyB0byB5b3VyIHNpdHVhdGlvbi5cbiAgPC9wPlxuPC9kaXY+XG5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2luY29tZScpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdjaGFyaXR5UGN0JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3Byb3BlcnR5VGF4JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ21vcnRnYWdlSW50ZXJlc3QnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnc3RhdGUnKSJ9XX0=
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../posts/2025-12-19-bunching-strategy";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/lawwu\.github\.io\/blog\.html");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<script src="https://utteranc.es/client.js" repo="lawwu/blog_comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>